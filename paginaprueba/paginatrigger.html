<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Sistema de Caja</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Verdana', Geneva, sans-serif;
      background-color: hsl(0, 0%, 80%);
      color: #333;
      text-align: center;
    }

    /* === HEADER CON BURBUJAS === */
    header {
      position: relative;
      background-color: #0a3d62;
      color: white;
      padding: 40px 0;
      overflow: hidden;
    }

    header h1 {
      position: relative;
      z-index: 2;
      font-size: 2em;
      letter-spacing: 1px;
    }

    .bubble {
      position: absolute;
      bottom: -60px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      animation: subir 10s infinite ease-in;
    }

    @keyframes subir {
      0% { transform: translateY(0) scale(1); opacity: 0.8; }
      100% { transform: translateY(-800px) scale(0.5); opacity: 0; }
    }

    /* === CONTENIDO === */
    .productos {
      display: flex;
      justify-content: center;
      gap: 25px;
      margin: 40px 0 20px;
      flex-wrap: wrap;
    }

    .producto {
      width: 180px;
      background-color: #f7f7f7;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      transition: transform 0.2s, box-shadow 0.2s;
      cursor: pointer;
    }

    .producto:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    .producto img {
      width: 100%;
      height: 150px;
      object-fit: cover;
    }

    .producto-info {
      padding: 10px 0;
      background: #f0f0f0;
    }

    .producto-info h3 {
      font-size: 16px;
      margin-bottom: 5px;
      color: #222;
    }

    .stock {
      font-size: 14px;
      color: #555;
    }

    .factura {
      background: #fff;
      border-radius: 10px;
      width: 400px;
      margin: 0 auto 40px;
      padding: 20px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    }

    table {
      width: 100%;
      margin-top: 10px;
      border-collapse: collapse;
    }

    th, td {
      border-bottom: 1px solid #ccc;
      padding: 6px 0;
    }

    .acciones {
      margin-top: 20px;
    }

    button {
      background-color: #666;
      color: white;
      border: none;
      padding: 10px 15px;
      margin: 5px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background-color: #555;
    }
  </style>
</head>
<body>

  <header>
    <h1>Sistema de Caja</h1>
    <!-- Burbujas generadas -->
    <script>
      for (let i = 0; i < 80; i++) {
        const bubble = document.createElement("div");
        bubble.classList.add("bubble");
        const size = Math.random() * 40 + 10;
        bubble.style.width = size + "px";
        bubble.style.height = size + "px";
        bubble.style.left = Math.random() * 100 + "%";
        bubble.style.animationDuration = (8 + Math.random() * 5) + "s";
        bubble.style.animationDelay = Math.random() * 5 + "s";
        document.currentScript.parentElement.appendChild(bubble);
      }
    </script>
  </header>

  <div class="productos">
    <div class="producto" onclick="agregarProducto('Nachos', 150)">
      <img src="nacho.png" alt="Nachos">
      <div class="producto-info">
        <h3>Nachos</h3>
        <p class="stock" id="stock-Nachos">Stock: 10</p>
      </div>
    </div>
    <div class="producto" onclick="agregarProducto('Coca', 120)">
      <img src="cocacola.png" alt="Coca Cola">
      <div class="producto-info">
        <h3>Coca Cola</h3>
        <p class="stock" id="stock-Coca">Stock: 10</p>
      </div>
    </div>
    <div class="producto" onclick="agregarProducto('Pururú', 100)">
      <img src="palomitas.jpg" alt="Pururú">
      <div class="producto-info">
        <h3>Pururú</h3>
        <p class="stock" id="stock-Pururú">Stock: 10</p>
      </div>
    </div>
  </div>

  <div class="factura">
    <h2>Factura</h2>
    <table id="tablaFactura">
      <thead>
        <tr>
          <th>Producto</th>
          <th>Cant.</th>
          <th>Precio</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <h3>Total: $<span id="total">0</span></h3>

    <div class="acciones">
      <button onclick="vender()">VENDER</button>
      <button onclick="vaciar()">VACIAR</button>
    </div>
  </div>

  <script>
    const stock = { Nachos: 10, Coca: 10, Pururú: 10 };
    const carrito = [];
    const precios = { Nachos: 150, Coca: 120, Pururú: 100 };

    function agregarProducto(nombre, precio) {
      let prod = carrito.find(p => p.nombre === nombre);
      if (prod) prod.cantidad++;
      else carrito.push({ nombre, cantidad: 1, precio });
      actualizarTabla();
    }

    function actualizarTabla() {
      const tbody = document.querySelector("#tablaFactura tbody");
      tbody.innerHTML = "";
      let total = 0;
      carrito.forEach(p => {
        total += p.precio * p.cantidad;
        tbody.innerHTML += `<tr><td>${p.nombre}</td><td>${p.cantidad}</td><td>$${p.precio * p.cantidad}</td></tr>`;
      });
      document.getElementById("total").textContent = total;
    }

    function vender() {
      for (let p of carrito) {
        if (p.cantidad > stock[p.nombre]) {
          alert("ERROR DE INVENTARIO: Stock insuficiente para completar la transacción. Venta revertida.");
          return;
        }
      }
      carrito.forEach(p => {
        stock[p.nombre] -= p.cantidad;
        document.getElementById("stock-" + p.nombre).textContent = "Stock: " + stock[p.nombre];
      });

      alert("Venta realizada correctamente.");
      vaciar();
    }

    function vaciar() {
      carrito.length = 0;
      actualizarTabla();
    }
  </script>

</body>
</html>
